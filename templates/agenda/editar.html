{% extends 'base.html' %} {% load widget_tweaks %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h5 class="card-title">Editar Compromisso</h5>
    </div>
    <div class="card-body">
        <form method="post"> {% csrf_token %}
            <div class="row">
                <div class="mb-3">
                    <label for="{{ form.nome_compromisso.id_for_label }}" class="form-label">{{ form.nome_compromisso.label }}</label>
                    {{ form.nome_compromisso|add_class:'form-control' }}
                    {% if form.errors.nome_compromisso %}
                    <span id="nome_compromisso_error" class="error invalid-feedback">{{ form.nome_compromisso.errors }}</span>
                    {% endif %}
                </div>
                <div class="mb-3 col-md-4">
                    <label for="{{ form.data.id_for_label }}" class="form-label">{{ form.data.label }}</label>
                    {{ form.data|add_class:'form-control' }}
                    {% if form.errors.data %}
                    <span id="data_error" class="error invalid-feedback">{{ form.data.errors }}</span>
                    {% endif %}
                </div>
                <div class="mb-3 col-md-4">
                    <label for="{{ form.hora_inicio.id_for_label }}" class="form-label">{{ form.hora_inicio.label }}</label>
                    {{ form.hora_inicio|add_class:'form-control' }}
                    {% if form.errors.hora_inicio %}
                    <span id="hora_inicio_error" class="error invalid-feedback">{{ form.hora_inicio.errors }}</span>
                    {% endif %}
                </div>
                <div class="mb-3 col-md-4">
                    <label for="{{ form.hora_termino.id_for_label }}" class="form-label">{{ form.hora_termino.label }}</label>
                    {{ form.hora_termino|add_class:'form-control' }}
                    {% if form.errors.hora_termino %}
                    <span id="hora_termino_error" class="error invalid-feedback">{{ form.hora_termino.errors }}</span>
                    {% endif %}
                </div>
                <div class="mb-3 col-md-8">
                    <label for="{{ form.local.id_for_label }}" class="form-label">{{ form.local.label }}</label>
                    {{ form.local|add_class:'form-control' }}
                    {% if form.errors.local %}
                    <span id="local_error" class="error invalid-feedback">{{ form.local.errors }}</span>
                    {% endif %}
                </div>
                <div class="mb-3 col-md-4">
                    <label for="{{ form.status_compromisso.id_for_label }}" class="form-label">{{ form.status_compromisso.label }}</label>
                    {{ form.status_compromisso|add_class:'form-select' }}
                    {% if form.errors.status_compromisso %}
                    <span id="status_compromisso_error" class="error invalid-feedback">{{ form.status_compromisso.errors }}</span>
                    {% endif %}
                </div>
                <div class="mb-3">
                    <label for="{{ form.observacoes.id_for_label }}" class="form-label">{{ form.observacoes.label }}</label>
                    {{ form.observacoes|add_class:'form-control' }}
                    {% if form.errors.observacoes %}
                    <span id="observacoes_error" class="error invalid-feedback">{{ form.observacoes.errors }}</span>
                    {% endif %}
                </div>
                <div class="mb-3">
                    <button type="submit" class="btn btn-outline-success float-end"><i class="fas fa-save me-1"></i> Salvar alterações</button>
                    <button id="btnCancelar" type="button" class="btn btn-outline-danger float-end me-2"><i class="fas fa-times me-1"></i> Cancelar</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript">
    var btnCancelar = document.getElementById("btnCancelar");

    btnCancelar.addEventListener("click", voltaInicio);

    function voltaInicio() {
        window.open("{% url 'app.agenda:home' %}", "_self");
    }
</script>
{% endblock %}